# ระบบฐานข้อมูลบัตรประชาชนไทย

---

## ภาพรวมระบบ
ID Bridge เป็นโปรแกรมที่ทำงานอยู่เบื้องหลังผ่านช่องทาง Local HTTP API ของระบบ
บันทึกข้อมูล ใช้สำหรับเชื่อมต่อเครื่องอ่านบัตรประชาชนไทย (Smart Card Reader) 
กับระบบลงทะเบียนผ่านหน้าต่าง UI Web Application เพื่อเรียกใช้งานการอ่านข้อมูลบัตรประชาชนได้อย่างปลอดภัย

---

## คุณสมบัติหลัก

- อ่านข้อมูลบัตรประชาชนไทยพร้อมภาพถ่าย
- ส่งข้อมูลในรูปแบบ JSON
- ทำงานแบบ Background (System Tray)
- ปิดโปรแกรมอัตโนมัติเมื่อไม่มีการใช้งาน
- ป้องกันการเปิดโปรแกรมซ้ำ (Single Instance)
- รองรับการเรียกใช้งานจาก Web Application

---

## เทคโนโลยีที่ใช้

| ส่วนประกอบ | เทคโนโลยี |
|---|---|
| Platform | .NET Windows |
| Smart Card | PCSC / ISO7816 |
| Library อ่านบัตร | ThaiNationalIDCard |
| การสื่อสาร | Local HTTP Server |
| รูปแบบข้อมูล | JSON |

---

## API สำหรับเรียกใช้งาน

### อ่านข้อมูลบัตรประชาชน
GET `http://localhost:8888/read/`

### ตัวอย่างข้อมูลที่ส่งกลับ
```json
{
  "CitizenID": "1234567890123",
  "Prefix": "เด็กหญิง",
  "Firstname": "อายู",
  "Lastname": "นาราศิลป์",
  "Gender": "หญิง",
  "BirthDate": "2021-01-01",
  "HouseNo": "123",
  "Moo": "4",
  "Tambon": "ในเมือง",
  "Amphoe": "เมือง",
  "Province": "นครราชสีมา",
  "Photo": "Base64EncodedImage"
}
```

---

## ความต้องการของระบบ

- Windows 10 หรือ Windows 11  
- เครื่องอ่านบัตรประชาชน (รองรับ PC/SC)  
- ติดตั้ง Driver เครื่องอ่านบัตรเรียบร้อยแล้ว
- .NET Runtime (ถ้าจำเป็น)
- ตั้งข้อยกเว้น Firewall (ถ้าจำเป็น)

---

## วิธีติดตั้งโปรแกรม

1. คัดลอกโฟลเดอติดตั้งไปไว้ในโปรเจคหรือที่ใดก็ได้
2. คลิกขวาเลือก **Run as Administrator** ที่ไฟล์ `setup.bat` จะปรากฏหน้าต่างข้อความ

```
==============================================
   SMARTCARD SERVICE - DYNAMIC LINKER
==============================================
[+] Detecting Service at: C:\ที่อยู่ไฟล์ติดตั้ง

==============================================
   SUCCESS: Service linked successfully!
==============================================
You can now use "Read Card" on your website.
This program is located at: C:\ที่อยู่ไฟล์ติดตั้ง\Reg.exe
==============================================
Press any key to continue . . .
```

### Firewall และโปรแกรมสแกนไวรัสมักมองว่าเป็นภัยคุกคาม ดังนั้นให้เพิ่มการยกเว้น  
### หากมีการย้ายโฟลเดอโปรแกรมให้ทำการรันไฟล์ setup.bat อีกครั้ง 

---

## การทำงานของระบบ

- โปรแกรมจะทำงานแบบ Background  
- รอรับคำสั่งจาก Web Application  
- อ่านข้อมูลจากบัตรประชาชน  
- ส่งข้อมูลกลับในรูปแบบ JSON  
- โปรแกรมจะปิดตัวเองอัตโนมัติเมื่อไม่มีการใช้งานเป็นเวลา **5 นาที**

---

## ความปลอดภัย (Security)

- เปิดให้เรียกใช้งานเฉพาะเครื่อง Localhost เท่านั้น  
- ไม่มีการส่งข้อมูลบัตรประชาชนออกอินเทอร์เน็ต  
- ใช้สำหรับการเชื่อมต่อกับ Web Application ภายในเครื่องเท่านั้น  

---

## Port ที่ใช้งาน

ค่าเริ่มต้น:
```
http://localhost:8888
```

> หาก Port ถูกใช้งานอยู่ อาจต้องเปลี่ยนค่าในการตั้งค่าระบบ

---

## Log การทำงาน

Log จะถูกบันทึกไว้ในโฟลเดอร์:
```
logs/
```

---

## การแก้ไขปัญหาเบื้องต้น

### ไม่สามารถเชื่อมต่อโปรแกรมได้
- ตรวจสอบ Firewall  
- ตรวจสอบว่า Service ทำงานอยู่  
- รีสตาร์ทเครื่อง  

### อ่านบัตรไม่ได้
- ตรวจสอบ Driver เครื่องอ่านบัตร  
- ถอดและเสียบบัตรใหม่  
- เปลี่ยนช่อง USB  

---

## License

This project is licensed under the GNU GPL v3 License.
See LICENSE file for details.

---

## Version

- Version: 1.0.0  
- Build Date: 2026  

---
